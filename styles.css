// CO2 Calculator
const btn = document.getElementById("calc-btn");
const resultBox = document.getElementById("result");

btn.addEventListener("click", () => {
  const electricity = Number(document.getElementById("electricity").value || 0);
  const travel = Number(document.getElementById("travel").value || 0);

  const electricityCO2 = electricity * 0.4;
  const travelCO2 = travel * 0.21;
  const total = (electricityCO2 + travelCO2).toFixed(2);

  let status = "Low";
  let color = "#7CFF7C";
  if(total > 20){ status="High"; color="#ff5252"; }
  else if(total > 10){ status="Neutral"; color="#ffd54f"; }

  resultBox.innerHTML = `<strong>Total CO₂:</strong> ${total} kg/day<br>
                         <strong>Status:</strong> <span style="color:${color}; font-weight:bold;">${status}</span>`;

  // Animate result
  resultBox.style.transform = "scale(0.95)";
  setTimeout(()=>{ resultBox.style.transform="scale(1)"; }, 100);
});

// Fetch Live Weather Data
const container = document.getElementById("weatherData");
const url = "https://api.open-meteo.com/v1/forecast?latitude=24.4539&longitude=54.3773&current=temperature_2m,wind_speed_10m,uv_index&daily=sunrise,sunset&timezone=Asia/Dubai";

fetch(url)
.then(res => res.json())
.then(data => {
  const temp = data.current.temperature_2m;
  const wind = data.current.wind_speed_10m;
  const uv = data.current.uv_index;
  const sunrise = data.daily.sunrise[0].split("T")[1];
  const sunset = data.daily.sunset[0].split("T")[1];

  container.innerHTML = `
    <div class="card"><div class="value">${temp}°C</div><div class="label">Temperature</div></div>
    <div class="card"><div class="value">${uv}</div><div class="label">UV Index</div></div>
    <div class="card"><div class="value">${wind} km/h</div><div class="label">Wind Speed</div></div>
    <div class="card"><div class="value">${sunrise}</div><div class="label">Sunrise</div></div>
    <div class="card"><div class="value">${sunset}</div><div class="label">Sunset</div></div>
  `;
})
.catch(() => { container.innerHTML = "<p>Failed to load climate data.</p>"; });
